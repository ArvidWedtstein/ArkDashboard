generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model basespot {
  id                  Int                  @id @default(autoincrement())
  name                String
  description         String
  latitude            Float
  longitude           Float
  image               String?
  createdAt           DateTime             @default(now())
  Map                 String               @default("TheIsland")
  estimatedForPlayers String?              @default("0")
  defenseImages       String[]
  createdBy           String?              @db.Uuid
  turretsetup_image   String?
  profiles            profiles?            @relation(fields: [createdBy], references: [id], onDelete: NoAction, onUpdate: NoAction)
  timeline_basespots  timeline_basespots[]
}

model tribe {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  createdBy   String?   @db.Uuid
  profiles    profiles? @relation(fields: [createdBy], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model profiles {
  id         String      @id @db.Uuid
  updated_at DateTime?   @db.Timestamptz(6)
  username   String?     @unique
  full_name  String?
  avatar_url String?
  website    String?
  biography  String?
  status     user_status @default(OFFLINE)
  role_id    String      @default(dbgenerated("'b707c929-ce07-4561-871a-39414ec59299'::uuid")) @db.Uuid
  roles      roles       @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  basespot   basespot[]
  timeline   timeline[]
  tribe      tribe[]
}

model roles {
  id                String              @id @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  name              String
  profiles          profiles[]
  roles_permissions roles_permissions[]
}

model roles_permissions {
  id      String @id @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  name    String
  role_id String @db.Uuid
  roles   roles  @relation(fields: [role_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model timeline {
  id                 String               @id @unique @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  createdAt          DateTime?            @default(now()) @db.Timestamptz(6)
  updatedAt          DateTime?            @db.Timestamptz(6)
  createdBy          String?              @db.Uuid
  profiles           profiles?            @relation(fields: [createdBy], references: [id], onDelete: NoAction, onUpdate: NoAction)
  timeline_basespots timeline_basespots[]
}

model timeline_basespots {
  id          BigInt    @id @default(autoincrement())
  createdAt   DateTime? @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime? @db.Timestamptz(6)
  timeline_id String?   @db.Uuid
  startDate   DateTime? @default(now()) @db.Date
  endDate     DateTime? @default(now()) @db.Timestamptz(6)
  basespotID  Int?
  tribeName   String?
  map         String?
  server      String?
  region      String?
  season      String?
  cluster     String?
  location    Json?     @db.Json
  players     String[]
  basespot    basespot? @relation(fields: [basespotID], references: [id], onDelete: NoAction, onUpdate: NoAction)
  timeline    timeline? @relation(fields: [timeline_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

enum user_status {
  ONLINE
  OFFLINE
}
